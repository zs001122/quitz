funasr服务部署

1.加载镜像
cd /nvme-01/FunASR/ 

sudo docker load -i /nvme-01/FunASR/funasr_online_cpu.tar

2.创建本地模型文件目录，创建容器是进行模型文件路径映射
mkdir -p ./funasr-runtime-resources/models

3.创建名为funasr的容器,并进入
sudo docker run -p 10096:10095 -it --privileged=true \
  -v $PWD/funasr-runtime-resources/models:/workspace/models \
  --name funasr \
  registry.cn-hangzhou.aliyuncs.com/funasr_repo/funasr:funasr-runtime-sdk-online-cpu-0.1.12

4.启动服务
cd FunASR/runtime

nohup bash run_server_2pass.sh   --decoder-thread-num 30  --download-model-dir /workspace/models   --vad-dir damo/speech_fsmn_vad_zh-cn-16k-common-onnx   --model-dir damo/speech_paraformer-large-vad-punc_asr_nat-zh-cn-16k-common-vocab8404-onnx    --online-model-dir damo/speech_paraformer-large_asr_nat-zh-cn-16k-common-vocab8404-online-onnx    --punc-dir damo/punc_ct-transformer_zh-cn-common-vad_realtime-vocab272727-onnx   --lm-dir damo/speech_ngram_lm_zh-cn-ai-wesp-fst   --itn-dir thuduj12/fst_itn_zh    --certfile 0   --hotword /workspace/models/hotwords.txt > log.txt 2>&1 &



nohup bash run_server_2pass.sh   --decoder-thread-num 30  --download-model-dir /workspace/models   --vad-dir damo/speech_fsmn_vad_zh-cn-16k-common-onnx   --model-dir damo/speech_paraformer-large-vad-punc_asr_nat-zh-cn-16k-common-vocab8404-onnx    --online-model-dir damo/speech_paraformer-large_asr_nat-zh-cn-16k-common-vocab8404-online-onnx    --punc-dir damo/punc_ct-transformer_zh-cn-common-vad_realtime-vocab272727-onnx   --lm-dir damo/speech_ngram_lm_zh-cn-ai-wesp-fst ^Ccertfile 0   --hotword /workspace/models/hotwords.txt > log.txt 2>&1 &

5.测试服务（退出容器）
cd /nvme-01/FunASR/samples/python/

python funasr_wss_client.py --host "127.0.0.1" --port 10096 --mode 2pass --ssl 0 --audio_in /data/projects/wsx/FunASR-main/samples/audio/asr_example.wav





docker服务：
docker ps -a |grep funasr01
docker exec -it funasr01 bash
cd ./FunASR/runtime/

启动服务：
nohup bash run_server_2pass.sh   --download-model-dir /workspace/models   --vad-dir damo/speech_fsmn_vad_zh-cn-16k-common-onnx   --model-dir damo/speech_paraformer-large-vad-punc_asr_nat-zh-cn-16k-common-vocab8404-onnx   --online-model-dir damo/speech_paraformer-large_asr_nat-zh-cn-16k-common-vocab8404-online-onnx  --punc-dir damo/punc_ct-transformer_zh-cn-common-vad_realtime-vocab272727-onnx   --lm-dir damo/speech_ngram_lm_zh-cn-ai-wesp-fst   --itn-dir thuduj12/fst_itn_zh   --certfile 0   --hotword /workspace/models/hotwords.txt > log.txt 2>&1 &

查看日志：tail -f log.txt
查看进程：ps -x | grep funasr-wss-server-2pass